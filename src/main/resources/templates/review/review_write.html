<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>review_list</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/header_footer.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/review.css">
    <link rel="stylesheet" href="/css/style_user.css">

</head>
<body>
<!-- user header 아래 복사 -->
<div th:replace="~{html/user_header :: userHeader}"></div>

<!-- main -->
<div class="main-container">
    <!-- 사이드바 -->
    <aside class="sidebar">
        <h3>마이페이지</h3>
        <ul>
            <li><a href="#">내 정보</a></li>
            <li><a href="#">예약 목록</a></li>
            <li><a th:href="@{/user/review/write/{userCode}(userCode=${userCode})}">이용 목록</a></li>
            <li><a href="#">북마크 목록</a></li>
            <li><a th:href="@{/user/review/{userCode}(userCode=${userCode})}">작성 리뷰 목록</a></li>
        </ul>
    </aside>

    <!-- 작성 리뷰 목록 -->
    <section class="content">
        <h2>이용 목록</h2>
        <script th:inline="javascript">
            // Thymeleaf로 데이터를 주입하여 JS에서 사용할 수 있도록 처리
            let testReview = /*[[${testReview}]]*/ [];
            console.log("로드된 리뷰 데이터:", testReview); // 로그로 데이터 확인
        </script>
        <script src="/js/review.js" defer></script> <!-- JavaScript 파일 로드 -->


        <table>
            <thead>
            <tr>
                <th>번호</th>
                <th>예약 날짜</th>
                <th>식당</th>
                <th>상태</th>
                <th>레시피</th>
            </tr>
            </thead>

            <tr th:each="reservation : ${reservation}">
                <td th:text="${reservation.reservationCode}"></td>
                <td th:text="${reservation.reservationDate}"></td>
                <td th:text="${reservation.restaurantName}"></td>
                <td>
                    <form action="/user/review/save" method="post" enctype="multipart/form-data">
                        <input type="hidden" name="userCode" th:value="${reservation.userCode}">
                        <input type="hidden" name="restaurantCode" th:value="${reservation.restaurantCode}">
                        <input type="hidden" name="reservationCode" th:value="${reservation.reservationCode}">

                        <label>리뷰 내용:</label>
                        <input type="text" name="reviewContent" placeholder="리뷰를 입력하세요" required>

                        <label>별점:</label>
                        <input type="number" name="rating" min="1" max="5" required>

                        <div>
                            <input type="file" name="multiFiles" class="fileInput" multiple accept="image/*">
                        </div>

                        <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>
                        <input type="submit">리뷰 작성
                    </form>
                </td>
            </tr>


<!--            <tr th:each="reservation : ${reservation}">-->
<!--                <td th:text="${reservation.reservationCode}"></td>-->
<!--                <td th:text="${reservation.reservationDate}"></td>-->
<!--                <td th:text="${reservation.restaurantName}"></td>-->
<!--                <td>-->
<!--                    <form action="/review/save" method="post" enctype="multipart/form-data">-->
<!--                        <input type="hidden" name="userCode" th:value="${reservation.userCode}">-->
<!--                        <input type="hidden" name="restaurantCode" th:value="${reservation.restaurantCode}">-->
<!--                        <input type="hidden" name="reservationCode" th:value="${reservation.reservationCode}">-->

<!--                        <label>리뷰 내용:</label>-->
<!--                        <input type="text" name="reviewContent" placeholder="리뷰를 입력하세요" required>-->

<!--                        <label>별점:</label>-->
<!--                        <input type="number" name="rating" min="1" max="5" required>-->

<!--                        <div>-->
<!--                            <input type="file" name="multiFiles" class="fileInput" multiple accept="image/*">-->
<!--                        </div>-->

<!--                         <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>-->
<!--                        <input type="submit">리뷰 작성-->
<!--                    </form>-->
<!--                </td>-->
<!--            </tr>-->
        </table>
    </section>
</div>
<!-- user footer 아래 복사 -->
<div th:replace="~{html/user_footer :: userFooter}"></div>
</body>
</html>
