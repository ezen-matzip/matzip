<!DOCTYPE html>
<html lang="ko"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="_csrf" content="${_csrf.token}" />
    <meta name="_csrf_header" content="${_csrf.headerName}" />

    <title>main</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">
    <link href="/css/style_user.css" rel="stylesheet">
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=fd7786d297e2d4aaab4aa8b6bbb06b88&libraries=services"
            type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/js/myLocation.js"></script>
    <script src="/js/weather.js"></script>
</head>

<!--<body id="weatherBody" onload="currentWeather();">-->

<body>

<header>
    <div class="user-header">
        <a href="/">
            <img class="logo" src="/img/logo.png">
        </a>

        <div class="search-container">
            <form action="/store/search">
                <div class="search-word">
                    <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>
                    <input name="keyword" placeholder="검색어를 입력하세요..." type="text">
                    <button class="search-btn" type="submit"><img src="/img/search-icon.png" style="width:3vh; height: 3vh;"></button>
                </div>
            </form>
            <div class="popular-searches">
                <span>인기검색어1</span>
                <span>인기검색어2</span>
                <span>인기검색어3</span>
                <span>인기검색어4</span>
                <span>인기검색어5</span>
                <form action="/store/search" id="findByLoc">
                    <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>
                    <input name="keyword" type="hidden" value="">
                    <a class="nearby" href="" onclick="myLocation()">가까운 곳 찾기</a>
                </form>
                <a class="game" href="">
                    <img alt="게임패드" id="game" src="/img/gamepad-icon.png"></a>
            </div>
        </div>

        <!-- menu -->
        <div class="menu">
            <!-- 비로그인(게스트) 상태일 때만 표시 -->
            <div sec:authorize="isAnonymous()">
                <button class="login" onclick="location.href='/login'">로그인</button>
                <button class="signup" onclick="location.href='/signup'">회원가입</button>
            </div>

            <!-- 로그인(인증) 상태일 때만 표시 -->
            <div sec:authorize="isAuthenticated()">
                <!-- 현재 로그인한 사용자의 아이디(혹은 이름) 표시 -->
                <span th:text="${#authentication.name}"></span>님 환영합니다!
                <!-- 로그아웃 -->
                <form method="post" style="display:inline;" th:action="@{/logout}">
                    <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>
                    <button class="logout" type="submit">로그아웃</button>
                </form>
            </div>

            <!-- 항상 보이는 메뉴 버튼이라면 그대로 둠 -->
            <button class="menu-btn">
                <img alt="마이페이지" src="/img/menu-icon.png">
            </button>
        </div>
    </div>
</header>

<!-- main -->
<!--<section class="body-section">-->
<!--    <div class="container-main">-->
<!--        <p>#더운날 #여름 #시원한🍧</p>-->
<!--        <div class="line-yellow-100"></div>-->
<!--        <div class="food-list" id="food-list">-->
<!--            <form action="/weather" id="weatherTest">-->
<!--                <input name="recommendKeywords" type="hidden" value="Clear"/>-->
<!--                <div class="food-item" th:each="recommend: ${recommendKeywords}">-->
<!--                    <img th:src="${recommend.getKeywordImgPath()}">-->
<!--                    <p th:text="${recommend.keyword}"></p>-->
<!--                </div>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<section class="body-section">
    <div class="container-main">
        <p>#더운날 #여름 #시원한🍧</p>
        <div class="line-yellow-100"></div>
        <div class="food-list" id="food-list">
            <!-- 음식 리스트가 동적으로 추가될 곳 -->
        </div>
    </div>

    <div class="container-main">
        <p>#중국인에게추천 #보리밥 #해물탕 #감자탕</p>
        <div class="line-yellow-100"></div>
        <div class="food-list">
            <!--                <div class="food-item"><img src="/img/삼계탕.jpg" alt="삼계탕">-->
            <!--                    <p>보리밥</p>-->
            <!--                </div>-->
            <!--                <div class="food-item"><img src="/img/삼계탕.jpg" alt="삼계탕">-->
            <!--                    <p>해물탕</p>-->
            <!--                </div>-->
            <!--                <div class="food-item"><img src="/img/삼계탕.jpg" alt="삼계탕">-->
            <!--                    <p>감자탕</p>-->
            <!--                </div>-->
            <!--                <div class="food-item"><img src="/img/삼계탕.jpg" alt="삼계탕">-->
            <!--                    <p>감자탕</p>-->
            <!--                </div>-->
            <!--                <div class="food-item"><img src="/img/삼계탕.jpg" alt="삼계탕">-->
            <!--                    <p>감자탕</p>-->
            <!--                </div>-->
        </div>
    </div>
</section>

<!-- footer -->
<div id="footer-user"></div>

<script>
    fetch('/html/user_footer.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('footer-user').innerHTML = data;
        })
        .catch(error => console.error('Footer 로드 중 오류 발생:', error));
</script>

</body>

</html>